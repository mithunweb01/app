<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="google-site-verification" content="YUqkf7c7YEs8IuaoGH_YEbtAlTwlNHAr_Oj2RhOhdmE" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mithun Multi-Tool App</title>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjs@12.0.0/lib/browser/math.min.js"></script>

  <style>
    :root{
      --bg1:#ff5f6d;
      --bg2:#ffc371;
      --glass-bg:rgba(255,255,255,0.18);
      --glass-border:rgba(255,255,255,0.25);
      --accent:#ff4d79;
      --shadow:rgba(0,0,0,0.18);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#111;}
    
    .tabs{position:sticky;top:0;z-index:1000;display:flex;gap:8px;padding:10px;overflow-x:auto;
      background:rgba(0,0,0,0.25);backdrop-filter:blur(6px);}
    .tab-btn{flex:0 0 auto;padding:10px 14px;border-radius:14px;background:var(--glass-bg);
      border:1px solid var(--glass-border);cursor:pointer;font-weight:700;color:#fff;white-space:nowrap;}
    .tab-btn:hover{transform:translateY(-2px)}
    .tab-btn.active-tab{background:var(--accent);}

    .container{padding:16px;max-width:1100px;margin:0 auto;}
    .tab-content{display:none;padding:10px 0;}
    .tab-content.active{display:block;}

    .tool-box{background:var(--glass-bg);border:1px solid var(--glass-border);
      padding:14px;border-radius:14px;margin-bottom:16px;box-shadow:0 8px 20px var(--shadow);color:#111;}
    
    input,select,textarea,button{
      padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.12);
      margin-top:8px;width:100%;font-size:15px;}
    textarea{min-height:100px;resize:vertical;}
    .result{background:#fff;border-radius:10px;padding:10px;margin-top:10px;
      white-space:pre-wrap;border-left:4px solid var(--accent);}

    .tools-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:14px;margin-top:12px;}
    .life-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;}
    .life-btn{background:rgba(255,255,255,0.12);border:1px solid var(--glass-border);
      padding:14px;border-radius:12px;text-align:center;cursor:pointer;font-weight:700;color:#fff;}

    @media (max-width:600px){
      .tab-btn{padding:8px 10px;font-size:13px;}
      .tool-box{padding:12px;}
    }
    .hidden{display:none}
    .cap-card img{border-radius:10px;max-width:100%;height:auto;}
  </style>
</head>
<body>

<div class="tabs">
  <button class="tab-btn active-tab" data-tab="home" onclick="openTab('home',this)">Home</button>
  <button class="tab-btn" data-tab="smart" onclick="openTab('smart',this)">Smart Tools</button>
  <button class="tab-btn" data-tab="life" onclick="openTab('life',this)">Life Tools</button>
  <button class="tab-btn" data-tab="number" onclick="openTab('number',this)">Number Tools</button>
  <button class="tab-btn" data-tab="fun" onclick="openTab('fun',this)">Fun Tools</button>
  <button class="tab-btn" data-tab="operations" onclick="openTab('operations',this)">Operations</button>
  <button class="tab-btn" data-tab="weather" onclick="openTab('weather',this)">Weather</button>
  <button class="tab-btn" data-tab="quiz" onclick="openTab('quiz',this)">Quiz</button>
</div>

<div class="container">

  <!-- HOME -->
  <section id="home" class="tab-content active">
    <h1>Welcome Mithun</h1>
    <div class="tool-box">
      <h3>Text Tools</h3>
      <textarea id="text_in" placeholder="Type or paste text here..."></textarea>
      <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
        <button onclick="upperText()">UPPERCASE</button>
        <button onclick="lowerText()">lowercase</button>
        <button onclick="removeSpaces()">Remove Spaces</button>
      </div>
      <textarea id="text_out" class="result" readonly placeholder="Result will appear here"></textarea>
    </div>
  </section>

  <!-- SMART TOOLS -->
  <section id="smart" class="tab-content">
    <h2>Smart Tools</h2>
    <div class="tools-grid">

      <div class="tool-box">
        <h3>QR Code</h3>
        <input id="qr_text" placeholder="Text or URL for QR">
        <button onclick="makeQR()">Generate</button>
        <div id="qr_box" class="result" style="text-align:center"></div>
      </div>

      <div class="tool-box">
        <h3>Barcode</h3>
        <input id="barcode_text" placeholder="Enter numbers/text for barcode">
        <button onclick="makeBarcode()">Generate</button>
        <div class="result" style="text-align:center"><svg id="barcode_svg"></svg></div>
      </div>

      <div class="tool-box">
        <h3>Your IP</h3>
        <button onclick="getIP()">Show IP</button>
        <div id="ip_box" class="result"></div>
      </div>

      <div class="tool-box">
        <h3>Device Info</h3>
        <button onclick="getDeviceInfo()">Show</button>
        <div id="device_box" class="result"></div>
      </div>

      <div class="tool-box">
        <h3>Password Strength</h3>
        <input id="pwd_input" type="password" placeholder="Enter password">
        <button onclick="checkPwd()">Check</button>
        <div id="pwd_box" class="result"></div>
      </div>

      <!-- NEW SMART TOOLS -->
      <div class="tool-box">
        <h3>URL Shortener</h3>
        <input id="long_url" placeholder="Enter long URL">
        <button onclick="shortenURL()">Shorten</button>
        <div id="short_url" class="result"></div>
      </div>

      <div class="tool-box">
        <h3>Text to PDF</h3>
        <textarea id="pdf_text" placeholder="Enter text to convert to PDF"></textarea>
        <button onclick="textToPDF()">Download PDF</button>
      </div>

      <div class="tool-box">
        <h3>Voice-to-Text (Browser API)</h3>
        <button id="start_voice" onclick="toggleVoice()">Start Recording</button>
        <button id="stop_voice" style="display:none;background:#c00" onclick="toggleVoice()">Stop Recording</button>
        <div id="voice_result" class="result"></div>
      </div>

      <div class="tool-box">
        <h3>Website Screenshot (API based)</h3>
        <input id="screenshot_url" placeholder="https://example.com">
        <button onclick="takeScreenshot()">Capture</button>
        <div id="screenshot_result" class="result" style="text-align:center"></div>
      </div>

      <div class="tool-box">
        <h3>Scientific Calculator</h3>
        <input id="calc_input" placeholder="e.g. sin(45) + 2^10 + sqrt(25)">
        <button onclick="calcScientific()">Calculate</button>
        <div id="calc_result" class="result"></div>
      </div>

    </div>
  </section>

  <!-- LIFE TOOLS -->
  <section id="life" class="tab-content">
    <h2>Life Tools</h2>
    <div class="life-grid">
      <div class="life-btn" onclick="openLife('age')">Age</div>
      <div class="life-btn" onclick="openLife('bmi')">BMI</div>
      <div class="life-btn" onclick="openLife('emi')">EMI</div>
      <div class="life-btn" onclick="openLife('unit')">Unit</div>
      <div class="life-btn" onclick="openLife('square')">Root</div>
      <div class="life-btn" onclick="openLife('percent')">Percentage</div>
      <div class="life-btn" onclick="openLife('discount')">Discount</div>
      <div class="life-btn" onclick="openLife('steps')">Steps to Calories</div>
      <div class="life-btn" onclick="openLife('stopwatch')">Stopwatch</div>
      <div class="life-btn" onclick="openLife('timer')">Timer</div>
      <div class="life-btn" onclick="openLife('sleep')">Sleep Time</div>
      <div class="life-btn" onclick="openLife('gst')">GST Calculator</div>
    </div>

    <div id="age" class="tool-box life-subtab hidden">
      <h3>Age Calculator</h3>
      <input type="date" id="age_dob">
      <button onclick="calcAge()">Calculate</button>
      <div id="age_out" class="result"></div>
    </div>

    <div id="bmi" class="tool-box life-subtab hidden">
      <h3>BMI Calculator</h3>
      <input id="bmi_h" placeholder="Height (cm)">
      <input id="bmi_w" placeholder="Weight (kg)">
      <button onclick="calcBMI()">Calculate</button>
      <div id="bmi_out" class="result"></div>
    </div>

    <div id="emi" class="tool-box life-subtab hidden">
      <h3>EMI Calculator</h3>
      <input id="emi_p" placeholder="Principal">
      <input id="emi_r" placeholder="Rate % (annual)">
      <input id="emi_n" placeholder="Months">
      <button onclick="calcEMI()">Calculate</button>
      <div id="emi_out" class="result"></div>
    </div>

    <div id="unit" class="tool-box life-subtab hidden">
      <h3>Unit Converter (m to cm)</h3>
      <input id="unit_in" placeholder="Value">
      <select id="unit_type">
        <option value="m-cm">Meter to CM</option>
        <option value="cm-m">CM to Meter</option>
      </select>
      <button onclick="convertUnit()">Convert</button>
      <div id="unit_out" class="result"></div>
    </div>

    <div id="square" class="tool-box life-subtab hidden">
      <h3>Square / Cube Root</h3>
      <input id="root_in" placeholder="Enter number">
      <button onclick="calcRoot()">Calculate</button>
      <div id="root_out" class="result"></div>
    </div>

    <div id="percent" class="tool-box life-subtab hidden">
      <h3>Percentage Finder</h3>
      <input id="percent_a" placeholder="Value">
      <input id="percent_b" placeholder="Total">
      <button onclick="calcPercent()">Find</button>
      <div id="percent_out" class="result"></div>
    </div>

    <div id="discount" class="tool-box life-subtab hidden">
      <h3>Discount Calculator</h3>
      <input id="d_price" placeholder="Price">
      <input id="d_percent" placeholder="Discount %">
      <button onclick="calcDiscount()">Find</button>
      <div id="discount_out" class="result"></div>
    </div>

    <!-- NEW LIFE TOOLS -->
    <div id="steps" class="tool-box life-subtab hidden">
      <h3>Steps to Calories</h3>
      <input id="steps_input" type="number" placeholder="Number of steps">
      <button onclick="stepsToCalories()">Convert</button>
      <div id="steps_result" class="result"></div>
    </div>

    <div id="stopwatch" class="tool-box life-subtab hidden">
      <h3>Stopwatch</h3>
      <div style="font-size:42px;text-align:center;font-weight:bold" id="stopwatch_display">00:00:00</div>
      <div style="text-align:center;margin-top:15px">
        <button onclick="startStopwatch()">Start</button>
        <button onclick="stopStopwatch()">Stop</button>
        <button onclick="resetStopwatch()">Reset</button>
      </div>
    </div>

    <div id="timer" class="tool-box life-subtab hidden">
      <h3>Timer</h3>
      <input id="timer_min" type="number" placeholder="Minutes" min="0">
      <input id="timer_sec" type="number" placeholder="Seconds" min="0" max="59" value="0">
      <button onclick="startTimer()">Start Timer</button>
      <div id="timer_display" style="font-size:36px;text-align:center;margin:15px 0">00:00</div>
    </div>

    <div id="sleep" class="tool-box life-subtab hidden">
      <h3>Sleep Time Calculator</h3>
      <input type="time" id="wake_time">
      <button onclick="suggestSleep()">Suggest Bed Time</button>
      <div id="sleep_result" class="result"></div>
    </div>

    <div id="gst" class="tool-box life-subtab hidden">
      <h3>GST Calculator</h3>
      <input id="gst_amount" type="number" placeholder="Amount (excl. GST)">
      <select id="gst_rate">
        <option value="0">0%</option>
        <option value="5">5%</option>
        <option value="12">12%</option>
        <option value="18" selected>18%</option>
        <option value="28">28%</option>
      </select>
      <button onclick="calcGST()">Calculate</button>
      <div id="gst_result" class="result"></div>
    </div>
  </section>

  <!-- NUMBER TOOLS -->
  <section id="number" class="tab-content">
    <h2>Number Tools</h2>
    <div class="tools-grid">
      <div class="tool-box">
        <h3>HCF & LCM Calculator</h3>
        <input id="hcf_a" placeholder="Number 1">
        <input id="hcf_b" placeholder="Number 2">
        <button onclick="calcHCF_LCM()">Calculate</button>
        <div id="hcf_result" class="result"></div>
      </div>

      <div class="tool-box">
        <h3>Number to Words (Indian system)</h3>
        <input id="num_words" placeholder="Enter number">
        <button onclick="numberToWords()">Convert</button>
        <div id="words_result" class="result"></div>
      </div>

      <div class="tool-box">
        <h3>Roman to Number Converter</h3>
        <input id="roman_input" placeholder="Enter Roman or Number">
        <button onclick="convertRoman()">Convert</button>
        <div id="roman_result" class="result"></div>
      </div>
    </div>
  </section>

  <!-- FUN TOOLS -->
  <section id="fun" class="tab-content">
    <h2>Fun Tools</h2>
    <div class="tools-grid">
      <div class="tool-box">
        <h3>Random Number / Dice</h3>
        <input id="dice_min" type="number" value="1" style="width:48%">
        <input id="dice_max" type="number" value="6" style="width:48%">
        <button onclick="rollDice()">Roll</button>
        <div id="dice_result" class="result" style="font-size:60px;text-align:center"></div>
      </div>

      <div class="tool-box">
        <h3>Word Scrambler</h3>
        <input id="scramble_word" placeholder="Enter a word">
        <button onclick="scrambleWord()">Scramble</button>
        <div id="scrambled_result" class="result" style="font-size:28px"></div>
      </div>

      <div class="tool-box">
        <h3>Nickname Generator</h3>
        <input id="nick_name" placeholder="Your name">
        <button onclick="generateNickname()">Generate</button>
        <div id="nickname_result" class="result" style="font-size:24px"></div>
      </div>
    </div>
  </section>

  <!-- OPERATIONS -->
  <section id="operations" class="tab-content">
    <h2>Number Operations</h2>
    <div class="tool-box">
      <h3>Prime Checker</h3>
      <input id="prime_in" placeholder="Enter integer">
      <button onclick="isPrimeCheck()">Check</button>
      <div id="prime_out" class="result"></div>
    </div>

    <div class="tool-box">
      <h3>Factorial</h3>
      <input id="fact_in" placeholder="Enter integer">
      <button onclick="fact()">Find</button>
      <div id="fact_out" class="result"></div>
    </div>
  </section>

  <!-- WEATHER -->
  <section id="weather" class="tab-content">
    <h2>Weather</h2>
    <div class="tool-box">
      <h3>Auto Location Weather</h3>
      <button onclick="autoWeather()">Get Weather</button>
      <div id="auto_weather_out" class="result"></div>
    </div>
    <div class="tool-box">
      <h3>City Weather</h3>
      <input id="city_in" placeholder="City name">
      <button onclick="cityWeather()">Search</button>
      <div id="city_weather_out" class="result"></div>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="quiz" class="tab-content">
    <h2>Quiz</h2>
    <div class="tool-box">
      <button onclick="startQuiz()">Start Math Quiz</button>
      <div id="quiz_box" class="result"></div>
    </div>
  </section>

</div>

<script>
function $id(id){return document.getElementById(id);}

function openTab(id, btn){
  document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
  $id(id)?.classList.add("active");
  document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active-tab"));
  if(btn) btn.classList.add("active-tab");
}

/* TEXT TOOLS */
function upperText(){$id('text_out').value = $id('text_in').value.toUpperCase();}
function lowerText(){$id('text_out').value = $id('text_in').value.toLowerCase();}
function removeSpaces(){$id('text_out').value = $id('text_in').value.replace(/\s+/g,' ').trim();}

/* SMART TOOLS */
function makeQR(){
  const v = encodeURIComponent($id('qr_text').value||'');
  $id('qr_box').innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${v}">`;
}
function makeBarcode(){
  const v = $id('barcode_text').value || '123456789';
  try{JsBarcode("#barcode_svg", v, {format:"auto",displayValue:true,width:2,height:60});}
  catch(e){alert('Invalid barcode');}
}
async function getIP(){
  try{
    const r = await fetch("https://api.ipify.org?format=json");
    const d = await r.json();
    $id('ip_box').innerText = d.ip;
  }catch(e){
    $id('ip_box').innerText = 'Failed to fetch IP';
  }
}
function getDeviceInfo(){
  $id('device_box').innerText = navigator.userAgent;
}
function checkPwd(){
  const p = $id('pwd_input').value || '';
  let s=0;
  if(p.length>=8) s++;
  if(/[0-9]/.test(p)) s++;
  if(/[A-Z]/.test(p)) s++;
  if(/[@#$%^&*!]/.test(p)) s++;
  const labels = ["Very Weak","Weak","Medium","Strong","Very Strong"];
  $id('pwd_box').innerText = labels[Math.min(s,4)];
}

/* NEW SMART TOOLS */
function shortenURL(){
  const url = $id('long_url').value.trim();
  if(!url || !url.startsWith('http')) return $id('short_url').innerText = 'Enter valid URL';
  const short = "mithun.in/" + btoa(url).substr(0,10);
  $id('short_url').innerHTML = `<a href="${url}" target="_blank">${short}</a> (Demo)`;
}
function textToPDF(){
  const text = $id('pdf_text').value || 'Hello from Mithun Tool';
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text(text, 10, 10);
  doc.save("mithun-tool.pdf");
}
let recognition = null;
function toggleVoice(){
  if(!('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)){
    $id('voice_result').innerText = 'Not supported in your browser';
    return;
  }
  if(!recognition){
    const SR = window.SpeechRecognition || webkitSpeechRecognition;
    recognition = new SR();
    recognition.lang = 'en-IN';
    recognition.onresult = e => $id('voice_result').innerText = e.results[0][0].transcript;
    recognition.onerror = () => $id('voice_result').innerText = 'Error';
  }
  if(recognition.running){
    recognition.stop();
    $id('start_voice').style.display = 'block';
    $id('stop_voice').style.display = 'none';
    recognition.running = false;
  } else {
    recognition.start();
    $id('start_voice').style.display = 'none';
    $id('stop_voice').style.display = 'block';
    recognition.running = true;
  }
}
function takeScreenshot(){
  const url = $id('screenshot_url').value.trim();
  if(!url) return alert('Enter URL');
  const api = `https://api.thumbnail.ws/api/${btoa(url)}/thumbnail/get?width=800&height=600`;
  $id('screenshot_result').innerHTML = `<img src="${api}" style="max-width:100%;border-radius:8px">`;
}
function calcScientific(){
  try{
    const res = math.evaluate($id('calc_input').value);
    $id('calc_result').innerText = res;
  }catch(e){
    $id('calc_result').innerText = 'Invalid expression';
  }
}

/* LIFE TOOLS */
function openLife(id){
  document.querySelectorAll('.life-subtab').forEach(s=>s.classList.add('hidden'));
  $id(id)?.classList.remove('hidden');
  $id(id)?.scrollIntoView({behavior:'smooth'});
}
function calcAge(){
  const v = $id('age_dob').value;
  if(!v) return $id('age_out').innerText='Enter DOB';
  const d = new Date(v);
  const diff = Date.now() - d.getTime();
  const age = Math.floor(diff/(365.25*24*3600*1000));
  $id('age_out').innerText = 'Age: '+age + ' years';
}
function calcBMI(){
  const h = parseFloat($id('bmi_h').value)/100;
  const w = parseFloat($id('bmi_w').value);
  if(!h||!w) return $id('bmi_out').innerText='Enter values';
  $id('bmi_out').innerText = 'BMI: '+(w/(h*h)).toFixed(2);
}
function calcEMI(){
  const P = parseFloat($id('emi_p').value);
  const r = parseFloat($id('emi_r').value)/1200;
  const n = parseInt($id('emi_n').value);
  if(!P||!r||!n) return $id('emi_out').innerText='Enter values';
  const emi = P*r*Math.pow(1+r,n)/(Math.pow(1+r,n)-1);
  $id('emi_out').innerText = 'EMI: ₹'+emi.toFixed(2);
}
function convertUnit(){
  const v = parseFloat($id('unit_in').value);
  if(isNaN(v)) return $id('unit_out').innerText='Enter number';
  $id('unit_out').innerText = $id('unit_type').value==='m-cm' ? (v*100)+' cm' : (v/100)+' m';
}
function calcRoot(){
  const n = parseFloat($id('root_in').value);
  if(isNaN(n)) return $id('root_out').innerText='Enter number';
  $id('root_out').innerText = 'Square Root: '+Math.sqrt(n).toFixed(4)+'\nCube Root: '+Math.cbrt(n).toFixed(4);
}
function calcPercent(){
  const a = parseFloat($id('percent_a').value);
  const b = parseFloat($id('percent_b').value);
  if(isNaN(a)||isNaN(b)||b===0) return $id('percent_out').innerText='Invalid';
  $id('percent_out').innerText = ((a/b)*100).toFixed(2)+'%';
}
function calcDiscount(){
  const p = parseFloat($id('d_price').value);
  const d = parseFloat($id('d_percent').value);
  if(isNaN(p)||isNaN(d)) return $id('discount_out').innerText='Invalid';
  const save = p * d / 100;
  $id('discount_out').innerText = 'You Save: ₹'+save.toFixed(2)+'\nFinal: ₹'+(p-save).toFixed(2);
}

/* NEW LIFE TOOLS */
function stepsToCalories(){
  const s = parseInt($id('steps_input').value) || 0;
  const cal = (s * 0.04).toFixed(1);
  $id('steps_result').innerText = s + ' steps ≈ ' + cal + ' calories burned';
}
let swInt, swSec = 0;
function startStopwatch(){
  if(swInt) return;
  swInt = setInterval(()=>{
    swSec++;
    let h = String(Math.floor(swSec/3600)).padStart(2,'0');
    let m = String(Math.floor((swSec%3600)/60)).padStart(2,'0');
    let s = String(swSec%60).padStart(2,'0');
    $id('stopwatch_display').innerText = h+':'+m+':'+s;
  },1000);
}
function stopStopwatch(){clearInterval(swInt); swInt=null;}
function resetStopwatch(){stopStopwatch(); swSec=0; $id('stopwatch_display').innerText='00:00:00';}
function startTimer(){
  let min = parseInt($id('timer_min').value)||0;
  let sec = parseInt($id('timer_sec').value)||0;
  let total = min*60 + sec;
  if(total<=0) return alert('Set time');
  clearInterval(window.tInt);
  window.tInt = setInterval(()=>{
    total--;
    if(total<=0){clearInterval(window.tInt); $id('timer_display').innerText='Time Up!'; return;}
    let m = String(Math.floor(total/60)).padStart(2,'0');
    let s = String(total%60).padStart(2,'0');
    $id('timer_display').innerText = m+':'+s;
  },1000);
}
function suggestSleep(){
  const w = $id('wake_time').value;
  if(!w) return $id('sleep_result').innerText='Select wake time';
  const [h,m] = w.split(':');
  let mins = parseInt(h)*60 + parseInt(m);
  let res = "Bedtime Suggestions:\n";
  [1.5,3,4.5,6,7.5].forEach(hours=>{
    let bed = mins - hours*60 - 15;
    if(bed < 0) bed += 1440;
    let bh = String(Math.floor(bed/60)%24).padStart(2,'0');
    let bm = String(bed%60).padStart(2,'0');
    res += `${bh}:${bm} → ${hours} hours sleep\n`;
  });
  $id('sleep_result').innerText = res;
}
function calcGST(){
  const amt = parseFloat($id('gst_amount').value);
  const rate = parseFloat($id('gst_rate').value);
  if(isNaN(amt)) return $id('gst_result').innerText='Enter amount';
  const gst = amt * rate / 100;
  $id('gst_result').innerHTML = `GST (${rate}%): ₹${gst.toFixed(2)}<br>Total: ₹${(amt+gst).toFixed(2)}`;
}

/* NUMBER TOOLS */
function calcHCF_LCM(){
  let a = parseInt($id('hcf_a').value);
  let b = parseInt($id('hcf_b').value);
  if(!a||!b) return $id('hcf_result').innerText='Enter two numbers';
  let x=a, y=b;
  while(y){let t=y; y=x%y; x=t;}
  const hcf = x;
  const lcm = (a*b)/hcf;
  $id('hcf_result').innerText = `HCF: ${hcf}\nLCM: ${lcm}`;
}
function numberToWords(){
  const num = parseInt($id('num_words').value);
  if(isNaN(num) || num > 999999999) return $id('words_result').innerText='0-999999999 only';
  const a = ['','One ','Two ','Three ','Four ','Five ','Six ','Seven ','Eight ','Nine ','Ten ','Eleven ','Twelve ','Thirteen ','Fourteen ','Fifteen ','Sixteen ','Seventeen ','Eighteen ','Nineteen '];
  const b = ['','','Twenty','Thirty','Forty','Fifty','Sixty','Seventy','Eighty','Ninety'];
  const f = n => n<20?a[n]:n<100?b[Math.floor(n/10)]+(n%10?a[n%10]:'')+' ':n<1000?a[Math.floor(n/100)]+'Hundred '+(n%100?f(n%100):'')+'':n<100000?f(Math.floor(n/1000))+'Thousand '+(n%1000?f(n%1000):'')+'':n<10000000?f(Math.floor(n/100000))+'Lakh '+(n%100000?f(n%100000):'')+'':f(Math.floor(n/10000000))+'Crore '+(n%10000000?f(n%10000000):'')+'';
  $id('words_result').innerText = (num===0?'Zero':f(num)) + 'Rupees Only';
}
function convertRoman(){
  const input = $id('roman_input').value.trim().toUpperCase();
  if(!input) return;
  if(!isNaN(input)){
    let n = parseInt(input);
    const v = [1000,900,500,400,100,90,50,40,10,9,5,4,1];
    const s = ["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];
    let res = '';
    for(let i=0;i<v.length;i++) while(n>=v[i]){res+=s[i]; n-=v[i];}
    $id('roman_result').innerText = res;
  } else {
    const map = {I:1,V:5,X:10,L:50,C:100,D:500,M:1000};
    let num = 0;
    for(let i=0;i<input.length;i++){
      if(map[input[i]] < map[input[i+1] || '']) num -= map[input[i]];
      else num += map[input[i]];
    }
    $id('roman_result').innerText = num;
  }
}

/* FUN TOOLS */
function rollDice(){
  const min = parseInt($id('dice_min').value)||1;
  const max = parseInt($id('dice_max').value)||6;
  const res = Math.floor(Math.random()*(max-min+1))+min;
  $id('dice_result').innerText = res;
}
function scrambleWord(){
  let w = $id('scramble_word').value;
  let a = w.split('');
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  $id('scrambled_result').innerText = a.join('');
}
const adj = ["Cool","Epic","Mystic","Shadow","Blaze","Storm","Ninja","Legend","Pro","Ace"];
const noun = ["Panda","Tiger","Falcon","Wolf","Dragon","Phoenix","Samurai","Viper","Ghost","Rider"];
function generateNickname(){
  const name = $id('nick_name').value.trim();
  const a = adj[Math.floor(Math.random()*adj.length)];
  const n = noun[Math.floor(Math.random()*noun.length)];
  $id('nickname_result').innerText = a + n + (name?' '+name:'');
}

/* OPERATIONS */
function isPrimeCheck(){
  const n = parseInt($id('prime_in').value);
  if(isNaN(n)||n<2){$id('prime_out').innerText='Not prime';return;}
  for(let i=2;i*i<=n;i++) if(n%i===0){$id('prime_out').innerText='Not prime';return;}
  $id('prime_out').innerText='Prime Number';
}
function fact(){
  let n = parseInt($id('fact_in').value);
  if(isNaN(n)||n<0){$id('fact_out').innerText='Enter non-negative';return;}
  let f=1;
  for(let i=2;i<=n;i++) f*=i;
  $id('fact_out').innerText = f;
}

/* WEATHER */
async function cityWeather(){
  const c = $id('city_in').value.trim();
  if(!c) return;
  try{
    const r = await fetch(`https://wttr.in/${encodeURIComponent(c)}?format=%l:+%t+|+%C`);
    const t = await r.text();
    $id('city_weather_out').innerText = t;
  }catch(e){
    $id('city_weather_out').innerText = 'Error';
  }
}
function autoWeather(){
  if(!navigator.geolocation) return $id('auto_weather_out').innerText='Not supported';
  navigator.geolocation.getCurrentPosition(async pos=>{
    try{
      const r = await fetch(`https://wttr.in/@${pos.coords.latitude.toFixed(4)},${pos.coords.longitude.toFixed(4)}?format=%l:+%t+|+%C`);
      const t = await r.text();
      $id('auto_weather_out').innerText = t;
    }catch(e){
      $id('auto_weather_out').innerText = 'Error';
    }
  }, ()=>$id('auto_weather_out').innerText='Permission denied');
}

/* QUIZ */
function startQuiz(){
  const a = Math.floor(Math.random()*20)+1;
  const b = Math.floor(Math.random()*20)+1;
  const ans = prompt(`${a} + ${b} = ?`);
  if(parseInt(ans) === a+b){
    $id('quiz_box').innerText = 'Correct! Well done';
  } else {
    $id('quiz_box').innerText = 'Wrong! Answer was '+(a+b);
  }
}

/* INIT */
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('.life-subtab').forEach(s=>s.classList.add('hidden'));
  openTab('home');
});
</script>
</body>
</html>
