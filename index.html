<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mithun Multi-Tool App</title>

<!-- External Libraries -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>

<style>
:root {
  --bg1: #ff5f6d;
  --bg2: #ffc371;
  --card: rgba(255,255,255,0.95);
  --text-dark: #000;
  --accent: #2196F3;
}
body {
  margin:0;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  font-family:Arial, sans-serif;
  color:white;
}

/* Tabs */
.tabs{
  display:flex;
  gap:10px;
  padding:12px;
  justify-content:center;
  background:rgba(0,0,0,0.4);
  position:sticky;
  top:0;
  z-index:1000;
}
.tab-btn{
  padding:10px 15px;
  border-radius:12px;
  background:rgba(255,255,255,0.2);
  color:white;
  cursor:pointer;
  font-weight:bold;
  border:2px solid var(--accent);
}
.tab-btn:hover, .tab-btn.active-tab{
  background:var(--accent);
}

.tab-content{ display:none; padding:20px; }
.active{ display:block; }

/* Cards */
.tool-box{
  background:var(--card);
  color:var(--text-dark);
  padding:15px;
  border-radius:12px;
  margin-bottom:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
}

input,textarea,select,button{
  padding:10px;
  margin:5px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  background:var(--accent);
  color:white;
  cursor:pointer;
  font-weight:bold;
}
.result{
  background:#f0f8ff;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  border-left:5px solid var(--accent);
  white-space:pre-wrap;
}

/* Life tools */
.life-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
}
.life-btn{
  background:white;
  color:black;
  padding:15px;
  border-radius:12px;
  text-align:center;
  cursor:pointer;
  font-weight:bold;
  border:2px solid var(--accent);
}
.life-btn:hover{
  background:var(--accent);
  color:white;
}
.life-subtab{ display:none; }
.life-subtab.active-sub{ display:block; }
</style>

</head>
<body>

<!-- NAV TABS -->
<div class="tabs">
  <div class="tab-btn" onclick="openTab('home',this)">Home</div>
  <div class="tab-btn" onclick="openTab('smart',this)">Smart Tools</div>
  <div class="tab-btn" onclick="openTab('capital',this)">Capital Finder</div>
  <div class="tab-btn" onclick="openTab('algebra',this)">Algebra Solver</div>
  <div class="tab-btn" onclick="openTab('operations',this)">Operations</div>
  <div class="tab-btn" onclick="openTab('life',this)">Life Tools</div>
  <div class="tab-btn" onclick="openTab('weather',this)">Weather</div>
  <div class="tab-btn" onclick="openTab('quiz',this)">Quiz</div>
</div>

<!-- HOME -->
<div id="home" class="tab-content active">
  <h1>Welcome Mithun ðŸ‘‹</h1>
  <div class="tool-box">
    <h3>Text Tools</h3>
    <textarea id="text_in"></textarea>
    <button onclick="upperText()">UPPERCASE</button>
    <button onclick="lowerText()">lowercase</button>
    <button onclick="removeSpaces()">Remove Spaces</button>
    <textarea id="text_out" class="result"></textarea>
  </div>
</div>

<!-- SMART TOOLS -->
<div id="smart" class="tab-content">
  <h2>Smart Tools</h2>

  <div class="tool-box">
    <h3>QR Code</h3>
    <input id="qr_text">
    <button onclick="makeQR()">Generate</button>
    <div id="qr_box" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Barcode</h3>
    <input id="barcode_text">
    <button onclick="makeBarcode()">Generate</button>
    <svg id="barcode_svg"></svg>
  </div>

  <div class="tool-box">
    <h3>Your IP</h3>
    <button onclick="getIP()">Show IP</button>
    <div id="ip_box" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Device Info</h3>
    <button onclick="getDeviceInfo()">Show</button>
    <div id="device_box" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Password Strength</h3>
    <input id="pwd_input">
    <button onclick="checkPwd()">Check</button>
    <div id="pwd_box" class="result"></div>
  </div>
</div>

<!-- CAPITAL FINDER -->
<div id="capital" class="tab-content">
  <h2>Capital Finder</h2>
  <div class="tool-box">
    <input id="country_in" placeholder="Enter country">
    <button onclick="findCapital()">Find</button>
    <div id="capital_out" class="result"></div>
  </div>
</div>

<!-- ALGEBRA SOLVER -->
<div id="algebra" class="tab-content">
  <h2>Algebra Solver</h2>
  <div class="tool-box">
    <input id="eq_in" placeholder="Enter equation (2x+3=11)">
    <button onclick="solveEq()">Solve</button>
    <div id="eq_out" class="result"></div>
  </div>
</div>

<!-- OPERATIONS -->
<div id="operations" class="tab-content">
  <h2>Number Operations</h2>

  <div class="tool-box">
    <h3>Prime Checker</h3>
    <input id="prime_in">
    <button onclick="isPrimeCheck()">Check</button>
    <div id="prime_out" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Factorial</h3>
    <input id="fact_in">
    <button onclick="fact()">Find</button>
    <div id="fact_out" class="result"></div>
  </div>
</div>

<!-- LIFE TOOLS -->
<div id="life" class="tab-content">
  <h2>Life Tools</h2>

  <div class="life-grid">
    <div class="life-btn" onclick="openLife('age')">Age</div>
    <div class="life-btn" onclick="openLife('bmi')">BMI</div>
    <div class="life-btn" onclick="openLife('emi')">EMI</div>
    <div class="life-btn" onclick="openLife('unit')">Unit Convert</div>
    <div class="life-btn" onclick="openLife('square')">Square/Cube Root</div>
    <div class="life-btn" onclick="openLife('percent')">Percentage</div>
    <div class="life-btn" onclick="openLife('discount')">Discount</div>
  </div>

  <!-- AGE -->
  <div id="age" class="life-subtab">
    <div class="tool-box">
      <h3>Age Calculator</h3>
      <input type="date" id="age_dob">
      <button onclick="calcAge()">Calculate</button>
      <div id="age_out" class="result"></div>
    </div>
  </div>

  <!-- BMI -->
  <div id="bmi" class="life-subtab">
    <div class="tool-box">
      <h3>BMI Calculator</h3>
      <input id="bmi_h" placeholder="Height (cm)">
      <input id="bmi_w" placeholder="Weight (kg)">
      <button onclick="calcBMI()">Calculate</button>
      <div id="bmi_out" class="result"></div>
    </div>
  </div>

  <!-- EMI -->
  <div id="emi" class="life-subtab">
    <div class="tool-box">
      <h3>EMI Calculator</h3>
      <input id="emi_p" placeholder="Principal">
      <input id="emi_r" placeholder="Rate %">
      <input id="emi_n" placeholder="Months">
      <button onclick="calcEMI()">Calculate</button>
      <div id="emi_out" class="result"></div>
    </div>
  </div>

  <!-- UNIT -->
  <div id="unit" class="life-subtab">
    <div class="tool-box">
      <h3>Unit Convert (m â†” cm)</h3>
      <input id="unit_in">
      <select id="unit_type">
        <option value="m-cm">Meter â†’ CM</option>
        <option value="cm-m">CM â†’ Meter</option>
      </select>
      <button onclick="convertUnit()">Convert</button>
      <div id="unit_out" class="result"></div>
    </div>
  </div>

  <!-- ROOT -->
  <div id="square" class="life-subtab">
    <div class="tool-box">
      <h3>Square / Cube Root</h3>
      <input id="root_in">
      <button onclick="calcRoot()">Calculate</button>
      <div id="root_out" class="result"></div>
    </div>
  </div>

  <!-- PERCENTAGE -->
  <div id="percent" class="life-subtab">
    <div class="tool-box">
      <h3>Percentage</h3>
      <input id="percent_a" placeholder="Value">
      <input id="percent_b" placeholder="Total">
      <button onclick="calcPercent()">Find</button>
      <div id="percent_out" class="result"></div>
    </div>
  </div>
</div>

<!-- WEATHER -->
<div id="weather" class="tab-content">
  <h2>Weather</h2>

  <div class="tool-box">
    <h3>Auto Location</h3>
    <button onclick="autoWeather()">Get Weather</button>
    <div id="auto_weather_out" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>City Search</h3>
    <input id="city_in">
    <button onclick="cityWeather()">Search</button>
    <div id="city_weather_out" class="result"></div>
  </div>
</div>

<!-- QUIZ -->
<div id="quiz" class="tab-content">
  <h2>Quiz</h2>
  <div class="tool-box">
    <h3>Math Quiz</h3>
    <button onclick="startQuiz()">Start Quiz</button>
    <div id="quiz_box" class="result"></div>
  </div>
</div>

<!-- JS -->
<script>

/* TAB SWITCH */
function openTab(id, btn){
  document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");

  document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active-tab"));
  btn.classList.add("active-tab");
}

/* LIFE SUB-TABS */
function openLife(id){
  document.querySelectorAll(".life-subtab").forEach(s=>s.classList.remove("active-sub"));
  document.getElementById(id).classList.add("active-sub");
}

/* TEXT TOOLS */
function upperText(){ text_out.value = text_in.value.toUpperCase(); }
function lowerText(){ text_out.value = text_in.value.toLowerCase(); }
function removeSpaces(){ text_out.value = text_in.value.split(" ").join(""); }

/* SMART TOOLS */
function makeQR(){
  let t = qr_text.value;
  qr_box.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${t}">`;
}
function makeBarcode(){
  JsBarcode("#barcode_svg", barcode_text.value);
}
async function getIP(){
  let d = await fetch("https://api.ipify.org?format=json").then(r=>r.json());
  ip_box.innerHTML = d.ip;
}
function getDeviceInfo(){
  device_box.innerHTML = navigator.userAgent;
}
function checkPwd(){
  let p = pwd_input.value;
  let score = 0;
  if(p.length>=8)score++;
  if(/[0-9]/.test(p))score++;
  if(/[A-Z]/.test(p))score++;
  if(/[@#$%]/.test(p))score++;

  pwd_box.innerHTML = ["Very Weak","Weak","Good","Strong","Very Strong"][score];
}

/* CAPITAL FINDER */
async function findCapital(){
  let c = country_in.value.trim().toLowerCase();
  if(!c){ capital_out.innerHTML="Enter country"; return;}

  let all = await fetch("https://restcountries.com/v3.1/all").then(r=>r.json());
  let found = all.find(x=>x.name.common.toLowerCase()==c);

  if(!found){ capital_out.innerHTML="Not found"; return;}

  let capital = found.capital ? found.capital[0] : "No capital";
  let flag = found.flags.png;

  capital_out.innerHTML = `
    <h3>${found.name.common}</h3>
    <img src="${flag}" width="120">
    <p><b>Capital:</b> ${capital}</p>
    <p><b>Region:</b> ${found.region}</p>
    <p><b>Population:</b> ${found.population.toLocaleString()}</p>
  `;
}

/* ALGEBRA SOLVER */
function solveEq(){
  let eq = eq_in.value;
  try{
    let parts = eq.split("=");
    let L = eval(parts[0].replace("x","*x"));
    eq_out.innerHTML = "Use algebra library if needed";
  }catch(e){
    eq_out.innerHTML="Invalid equation";
  }
}

/* OPERATIONS */
function isPrimeCheck(){
  let n = Number(prime_in.value);
  if(n<2)return prime_out.innerHTML="Not Prime";
  for(let i=2;i*i<=n;i++){
    if(n%i==0)return prime_out.innerHTML="Not Prime";
  }
  prime_out.innerHTML="Prime Number";
}
function fact(){
  let n=Number(fact_in.value),f=1;
  for(let i=1;i<=n;i++)f*=i;
  fact_out.innerHTML=f;
}

/* LIFE TOOLS */
function calcAge(){
  let d = new Date(age_dob.value);
  if(!age_dob.value)return age_out.innerHTML="Enter DOB";
  let age = new Date(Date.now()-d.getTime()).getUTCFullYear()-1970;
  age_out.innerHTML="Age: "+age;
}
function calcBMI(){
  let h=bmi_h.value/100,w=bmi_w.value;
  bmi_out.innerHTML = "BMI: "+(w/(h*h)).toFixed(2);
}
function calcEMI(){
  let P=emi_p.value,R=emi_r.value/1200,N=emi_n.value;
  let emi = P*R*Math.pow(1+R,N)/(Math.pow(1+R,N)-1);
  emi_out.innerHTML="EMI: "+emi.toFixed(2);
}
function convertUnit(){
  let v=unit_in.value,t=unit_type.value;
  unit_out.innerHTML = t=="m-cm" ? v*100+" cm" : v/100+" m";
}
function calcRoot(){
  let n=root_in.value;
  root_out.innerHTML=`Square Root: ${Math.sqrt(n)}\nCube Root: ${Math.cbrt(n)}`;
}
function calcPercent(){
  percent_out.innerHTML = (percent_a.value/percent_b.value*100).toFixed(2)+"%";
}

/* WEATHER */
async function cityWeather(){
  let c=city_in.value;
  let url=`https://api.openweathermap.org/data/2.5/weather?q=${c}&appid=439d4b804bc8187953eb36d2a8c26a02&units=metric`;
  let d=await fetch(url).then(r=>r.json());
  if(!d.main)return city_weather_out.innerHTML="Not found";
  city_weather_out.innerHTML = `Temp: ${d.main.temp}Â°C`;
}
function autoWeather(){
  navigator.geolocation.getCurrentPosition(async pos=>{
    let lat=pos.coords.latitude,lon=pos.coords.longitude;
    let url=`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=439d4b804bc8187953eb36d2a8c26a02&units=metric`;
    let d=await fetch(url).then(r=>r.json());
    auto_weather_out.innerHTML = `Location: ${d.name}\nTemp: ${d.main.temp}Â°C`;
  });
}

/* QUIZ */
function startQuiz(){
  let a=Math.floor(Math.random()*10);
  let b=Math.floor(Math.random()*10);
  let ans=prompt(`${a}+${b}=?`);
  quiz_box.innerHTML = ans==a+b ? "Correct!" : "Wrong";
}

</script>

</body>
</html>
