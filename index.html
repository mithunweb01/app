<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mithun Multi-Tool App</title>

<!-- External Libraries -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>

<style>
/* ------------------- THEME ------------------- */
:root {
  --bg1: #ff5f6d;
  --bg2: #ffc371;
  --glass-bg: rgba(255, 255, 255, 0.25);
  --glass-border: rgba(255, 255, 255, 0.4);
  --accent: #ff4d79;
  --shadow: rgba(0, 0, 0, 0.25);
}

body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,var(--bg1),var(--bg2));
  color:white;
  backdrop-filter: blur(8px);
}

/* ------------------- TABS ------------------- */
.tabs{
  position:sticky;
  top:0;
  z-index:1000;
  display:flex;
  justify-content:center;
  gap:10px;
  padding:12px;
  background:rgba(0,0,0,0.3);
  backdrop-filter:blur(10px);
}

.tab-btn{
  padding:10px 15px;
  border-radius:15px;
  background:var(--glass-bg);
  border:1px solid var(--glass-border);
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
  color:white;
}

.tab-btn:hover, .tab-btn.active-tab{
  background:var(--accent);
}

/* ------------------- CONTENT ------------------- */
.tab-content{ display:none; padding:20px; }
.tab-content.active{ display:block; }

/* ------------------- GLASS CARD ------------------- */
.tool-box{
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
  box-shadow: 0 8px 25px var(--shadow);
  padding: 20px;
  border-radius: 20px;
  margin-bottom: 25px;
  color: black;
}

/* Inputs */
input,select,textarea,button{
  padding:10px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-top:8px;
  width:95%;
}
button{
  background:var(--accent);
  color:white;
  font-weight:bold;
  cursor:pointer;
  border:none;
}

/* Result */
.result{
  background:white;
  border-radius:12px;
  padding:10px;
  margin-top:10px;
  white-space:pre-wrap;
  border-left:5px solid var(--accent);
}

/* ------------------- LIFE TOOLS ------------------- */
.life-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
}
.life-btn{
  background:var(--glass-bg);
  backdrop-filter:blur(12px);
  border:1px solid var(--glass-border);
  padding:15px;
  border-radius:15px;
  cursor:pointer;
  font-weight:bold;
  text-align:center;
}
.life-btn:hover{ background:var(--accent); }

.life-subtab{ display:none; }
.life-subtab.active-sub{ display:block; }

/* ------------------- CAPITAL CARD ------------------- */
.cap-card{
  background:rgba(255,255,255,0.2);
  border:1px solid rgba(255,255,255,0.4);
  padding:20px;
  border-radius:20px;
  backdrop-filter: blur(10px);
  color:black;
  margin-top:10px;
  box-shadow:0 8px 25px var(--shadow);
}
.cap-card img{ border-radius:12px; }
.cap-title{ font-size:26px; font-weight:bold; }

/* MAP BUTTON */
.map-btn{
  background:#333;
  color:white;
  padding:10px 15px;
  border-radius:10px;
  display:inline-block;
  margin-top:10px;
}
</style>
</head>
<body>

<!-- ------------------- NAVIGATION ------------------- -->
<div class="tabs">
  <div class="tab-btn active-tab" onclick="openTab('home',this)">Home</div>
  <div class="tab-btn" onclick="openTab('smart',this)">Smart Tools</div>
  <div class="tab-btn" onclick="openTab('capital',this)">Capital Finder</div>
  <div class="tab-btn" onclick="openTab('algebra',this)">Algebra Solver</div>
  <div class="tab-btn" onclick="openTab('operations',this)">Operations</div>
  <div class="tab-btn" onclick="openTab('life',this)">Life Tools</div>
  <div class="tab-btn" onclick="openTab('weather',this)">Weather</div>
  <div class="tab-btn" onclick="openTab('quiz',this)">Quiz</div>
</div>

<!-- ------------------- HOME ------------------- -->
<div id="home" class="tab-content active">
  <h1>Welcome Mithun ðŸ‘‹</h1>
  <div class="tool-box">
    <h3>Text Tools</h3>
    <textarea id="text_in"></textarea>
    <button onclick="upperText()">UPPERCASE</button>
    <button onclick="lowerText()">lowercase</button>
    <button onclick="removeSpaces()">Remove Spaces</button>
    <textarea id="text_out" class="result"></textarea>
  </div>
</div>

<!-- ------------------- SMART TOOLS ------------------- -->
<div id="smart" class="tab-content">
  <h2>Smart Tools</h2>

  <div class="tool-box">
    <h3>QR Code</h3>
    <input id="qr_text">
    <button onclick="makeQR()">Generate</button>
    <div id="qr_box" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Barcode</h3>
    <input id="barcode_text">
    <button onclick="makeBarcode()">Generate</button>
    <svg id="barcode_svg"></svg>
  </div>

  <div class="tool-box">
    <h3>Your IP</h3>
    <button onclick="getIP()">Show IP</button>
    <div id="ip_box" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Device Info</h3>
    <button onclick="getDeviceInfo()">Show</button>
    <div id="device_box" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Password Strength</h3>
    <input id="pwd_input">
    <button onclick="checkPwd()">Check</button>
    <div id="pwd_box" class="result"></div>
  </div>
</div>

<!-- ------------------- CAPITAL FINDER ------------------- -->
<div id="capital" class="tab-content">
  <h2>Capital Finder</h2>

  <div class="tool-box">
    <input id="country_in" placeholder="Enter country name">
    <button onclick="findCapital()">Find Capital</button>
    <div id="capital_out"></div>
  </div>
</div>

<!-- ------------------- ALGEBRA ------------------- -->
<div id="algebra" class="tab-content">
  <h2>Algebra Solver</h2>
  <div class="tool-box">
    <input id="eq_in" placeholder="Example: 2x+3=11">
    <button onclick="solveEq()">Solve</button>
    <div id="eq_out" class="result"></div>
  </div>
</div>

<!-- ------------------- OPERATIONS ------------------- -->
<div id="operations" class="tab-content">
  <h2>Number Operations</h2>

  <div class="tool-box">
    <h3>Prime Checker</h3>
    <input id="prime_in">
    <button onclick="isPrimeCheck()">Check</button>
    <div id="prime_out" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>Factorial</h3>
    <input id="fact_in">
    <button onclick="fact()">Find</button>
    <div id="fact_out" class="result"></div>
  </div>
</div>

<!-- ------------------- LIFE TOOLS ------------------- -->
<div id="life" class="tab-content">
  <h2>Life Tools</h2>

  <div class="life-grid">
    <div class="life-btn" onclick="openLife('age')">Age</div>
    <div class="life-btn" onclick="openLife('bmi')">BMI</div>
    <div class="life-btn" onclick="openLife('emi')">EMI</div>
    <div class="life-btn" onclick="openLife('unit')">Unit Convert</div>
    <div class="life-btn" onclick="openLife('square')">Root</div>
    <div class="life-btn" onclick="openLife('percent')">Percentage</div>
    <div class="life-btn" onclick="openLife('discount')">Discount</div>
  </div>

  <!-- AGE -->
  <div id="age" class="life-subtab">
    <div class="tool-box">
      <h3>Age Calculator</h3>
      <input type="date" id="age_dob">
      <button onclick="calcAge()">Calculate</button>
      <div id="age_out" class="result"></div>
    </div>
  </div>

  <!-- BMI -->
  <div id="bmi" class="life-subtab">
    <div class="tool-box">
      <h3>BMI Calculator</h3>
      <input id="bmi_h" placeholder="Height (cm)">
      <input id="bmi_w" placeholder="Weight (kg)">
      <button onclick="calcBMI()">Calculate</button>
      <div id="bmi_out" class="result"></div>
    </div>
  </div>

  <!-- EMI -->
  <div id="emi" class="life-subtab">
    <div class="tool-box">
      <h3>EMI Calculator</h3>
      <input id="emi_p" placeholder="Principal">
      <input id="emi_r" placeholder="Rate %">
      <input id="emi_n" placeholder="Months">
      <button onclick="calcEMI()">Calculate</button>
      <div id="emi_out" class="result"></div>
    </div>
  </div>

  <!-- UNIT -->
  <div id="unit" class="life-subtab">
    <div class="tool-box">
      <h3>Unit Converter (m â†” cm)</h3>
      <input id="unit_in">
      <select id="unit_type">
        <option value="m-cm">Meter â†’ CM</option>
        <option value="cm-m">CM â†’ Meter</option>
      </select>
      <button onclick="convertUnit()">Convert</button>
      <div id="unit_out" class="result"></div>
    </div>
  </div>

  <!-- ROOT -->
  <div id="square" class="life-subtab">
    <div class="tool-box">
      <h3>Square / Cube Root</h3>
      <input id="root_in">
      <button onclick="calcRoot()">Calculate</button>
      <div id="root_out" class="result"></div>
    </div>
  </div>

  <!-- PERCENTAGE -->
  <div id="percent" class="life-subtab">
    <div class="tool-box">
      <h3>Percentage Finder</h3>
      <input id="percent_a" placeholder="Value">
      <input id="percent_b" placeholder="Total">
      <button onclick="calcPercent()">Find</button>
      <div id="percent_out" class="result"></div>
    </div>
  </div>

  <!-- DISCOUNT -->
  <div id="discount" class="life-subtab">
    <div class="tool-box">
      <h3>Discount Calculator</h3>
      <input id="d_price" placeholder="Price">
      <input id="d_percent" placeholder="Discount %">
      <button onclick="calcDiscount()">Find</button>
      <div id="discount_out" class="result"></div>
    </div>
  </div>
</div>

<!-- ------------------- WEATHER ------------------- -->
<div id="weather" class="tab-content">
  <h2>Weather</h2>

  <div class="tool-box">
    <h3>Auto Location Weather</h3>
    <button onclick="autoWeather()">Get Weather</button>
    <div id="auto_weather_out" class="result"></div>
  </div>

  <div class="tool-box">
    <h3>City Weather</h3>
    <input id="city_in">
    <button onclick="cityWeather()">Search</button>
    <div id="city_weather_out" class="result"></div>
  </div>
</div>

<!-- ------------------- QUIZ ------------------- -->
<div id="quiz" class="tab-content">
  <h2>Quiz</h2>
  <div class="tool-box">
    <button onclick="startQuiz()">Start Math Quiz</button>
    <div id="quiz_box" class="result"></div>
  </div>
</div>

<!-- ------------------- SCRIPT ------------------- -->
<script>
function openTab(id, btn){
  document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
  document.getElementById(id).classList.add("active");

  document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active-tab"));
  btn.classList.add("active-tab");
}

function upperText(){ text_out.value = text_in.value.toUpperCase(); }
function lowerText(){ text_out.value = text_in.value.toLowerCase(); }
function removeSpaces(){ text_out.value = text_in.value.split(" ").join(""); }

function makeQR(){
  qr_box.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${qr_text.value}">`;
}
function makeBarcode(){ JsBarcode("#barcode_svg", barcode_text.value); }
async function getIP(){
  let d = await fetch("https://api.ipify.org?format=json").then(r=>r.json());
  ip_box.innerHTML = d.ip;
}
function getDeviceInfo(){ device_box.innerHTML = navigator.userAgent; }
function checkPwd(){
  let p = pwd_input.value;
  let s=0;
  if(p.length>=8)s++;
  if(/[0-9]/.test(p))s++;
  if(/[A-Z]/.test(p))s++;
  if(/[@#$%]/.test(p))s++;
  pwd_box.innerHTML=["Very Weak","Weak","Medium","Strong","Very Strong"][s];
}

/* ------------------- CAPITAL FINDER ------------------- */
async function findCapital(){
  let c = country_in.value.trim().toLowerCase();
  if(!c){ capital_out.innerHTML="Enter a country"; return; }

  let all = await fetch("https://restcountries.com/v3.1/all").then(r=>r.json());

  let found = all.find(x => x.name.common.toLowerCase() === c);

  if(!found){
    found = all.find(x => x.name.common.toLowerCase().includes(c));
  }

  if(!found){
    capital_out.innerHTML="Not found";
    return;
  }

  let name = found.name.common;
  let capital = found.capital ? found.capital[0] : "No Capital";
  let flag = found.flags.png;
  let region = found.region;
  let pop = found.population.toLocaleString();
  let lang = Object.values(found.languages || {}).join(", ");
  let curr = Object.values(found.currencies || {}).map(x => x.name).join(", ");

  let wiki = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${name}`)
             .then(r=>r.json()).catch(()=>({extract:""}));

  let summary = wiki.extract ? wiki.extract.split(". ").slice(0,2).join(". ")+"." : "No summary available.";

  capital_out.innerHTML = `
    <div class="cap-card">
      <div class="cap-title">${name}</div>
      <img src="${flag}" width="150"><br><br>
      <b>Capital:</b> ${capital}<br>
      <b>Region:</b> ${region}<br>
      <b>Population:</b> ${pop}<br>
      <b>Languages:</b> ${lang}<br>
      <b>Currency:</b> ${curr}<br><br>
      <b>About:</b> ${summary}<br><br>

      <a class="map-btn" target="_blank" href="https://www.google.com/maps/search/${name}">
        Open in Google Maps
      </a>
    </div>
  `;
}

/* ------------------- ALGEBRA ------------------- */
function solveEq(){
  try{
    let eq = eq_in.value.replace("=", "-(") + ")";
    let x;
    eval("x=" + eq);
    eq_out.innerHTML = "x = " + x;
  }catch{
    eq_out.innerHTML="Invalid equation";
  }
}

/* ------------------- OPERATIONS ------------------- */
function isPrimeCheck(){
  let n=Number(prime_in.value);
  if(n<2){ prime_out.innerHTML="Not prime"; return; }
  for(let i=2;i*i<=n;i++){
    if(n%i==0){ prime_out.innerHTML="Not prime"; return; }
  }
  prime_out.innerHTML="Prime Number";
}
function fact(){
  let n=Number(fact_in.value),f=1;
  for(let i=1;i<=n;i++)f*=i;
  fact_out.innerHTML=f;
}

/* ------------------- LIFE TOOLS ------------------- */
function openLife(id){
  document.querySelectorAll(".life-subtab").forEach(s=>s.classList.remove("active-sub"));
  document.getElementById(id).classList.add("active-sub");
}

function calcAge(){
  if(!age_dob.value) return age_out.innerHTML="Enter DOB";
  let d=new Date(age_dob.value);
  let age=new Date(Date.now()-d).getUTCFullYear()-1970;
  age_out.innerHTML="Age: "+age;
}
function calcBMI(){
  let h=bmi_h.value/100, w=bmi_w.value;
  bmi_out.innerHTML="BMI: "+(w/(h*h)).toFixed(2);
}
function calcEMI(){
  let P=emi_p.value,R=emi_r.value/1200,N=emi_n.value;
  let emi=P*R*Math.pow(1+R,N)/(Math.pow(1+R,N)-1);
  emi_out.innerHTML="EMI: "+emi.toFixed(2);
}
function convertUnit(){
  unit_out.innerHTML = unit_type.value=="m-cm"
    ? unit_in.value*100+" cm"
    : unit_in.value/100+" m";
}
function calcRoot(){
  let n=root_in.value;
  root_out.innerHTML=`Square Root: ${Math.sqrt(n)}\nCube Root: ${Math.cbrt(n)}`;
}
function calcPercent(){
  percent_out.innerHTML=(percent_a.value/percent_b.value*100).toFixed(2)+"%";
}
function calcDiscount(){
  let p=d_price.value, d=d_percent.value;
  let final=p-(p*d/100);
  discount_out.innerHTML="Final Price: â‚¹"+final;
}

/* ------------------- WEATHER ------------------- */
async function cityWeather(){
  let c=city_in.value;
  let url=`https://api.openweathermap.org/data/2.5/weather?q=${c}&appid=439d4b804bc8187953eb36d2a8c26a02&units=metric`;
  let d=await fetch(url).then(r=>r.json());
  if(!d.main)return city_weather_out.innerHTML="Not found";

  city_weather_out.innerHTML=`City: ${d.name}\nTemp: ${d.main.temp}Â°C\nHumidity: ${d.main.humidity}%`;
}

function autoWeather(){
  navigator.geolocation.getCurrentPosition(async pos=>{
    let lat=pos.coords.latitude, lon=pos.coords.longitude;
    let url=`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=439d4b804bc8187953eb36d2a8c26a02&units=metric`;
    let d=await fetch(url).then(r=>r.json());
    auto_weather_out.innerHTML=`Location: ${d.name}\nTemp: ${d.main.temp}Â°C\nHumidity: ${d.main.humidity}%`;
  });
}

/* ------------------- QUIZ ------------------- */
function startQuiz(){
  let a=Math.floor(Math.random()*10);
  let b=Math.floor(Math.random()*10);
  let ans=prompt(`${a}+${b}=?`);
  quiz_box.innerHTML = (ans==a+b) ? "Correct!" : "Wrong";
}
</script>

</body>
</html>
